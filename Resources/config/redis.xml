<?xml version="1.0" ?>

<container xmlns="http://www.symfony-project.org/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.symfony-project.org/schema/dic/services http://www.symfony-project.org/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="redis.connection.servers"></parameter>
        <parameter key="redis.database.number">0</parameter>

		<parameter key="redis.session.class">Bundle\RedisBundle\SessionStorage\RedisSessionStorage</parameter>
		<parameter key="redis.session.options.prefix">local</parameter>
		<parameter key="session.options.session_id"></parameter>
    </parameters>

    <services>
        <service id="redis_connection" class="Bundle\RedisBundle\RedisClient">
			<argument>%redis.connection.servers%</argument>
        </service>

        <service id="session.storage.redis" class="%redis.session.class%">
            <argument type="service" id="redis_connection" />
            <argument type="collection">
				<argument key="session_id">%session.options.session_id%</argument>
                <argument key="session_name">%session.options.name%</argument>
                <argument key="session_cookie_lifetime">%session.options.lifetime%</argument>
                <argument key="session_cookie_path">%session.options.path%</argument>
                <argument key="session_cookie_domain">%session.options.domain%</argument>
                <argument key="session_cookie_secure">%session.options.secure%</argument>
                <argument key="session_cookie_httponly">%session.options.httponly%</argument>
                <argument key="session_cache_limiter">%session.options.cache_limiter%</argument>
				<argument key="prefix">%redis.session.options.prefix%</argument>
            </argument>
        </service>
    </services>

</container>
